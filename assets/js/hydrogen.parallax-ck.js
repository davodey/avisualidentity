(function(e,t,n,r){"use strict";var i=e(t),s=i.height(),o=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame,u=function(e,t){arguments&&this._init(e,t)},a=[],f=function(){o?o(l):l()},l=function(){var t=i.scrollTop();e.each(a,function(){this instanceof u&&this.update(t)})};i.on("orientationchange.parallax resize.parallax",function(){s=i.height();f()}).on("scroll.parallax",f);u.prototype={defaults:{xpos:"50%",mode:"parallax",activeClass:"has-bg",parallaxClass:"parallax-bg fixed-bg",fixedBgClass:"fixed-bg",speedFactor:.4,loadingText:"loading..."},_init:function(t,n){var r=this;this.element=e(t);this.options=e.extend(!0,{},this.defaults,n,e(t).data());this.element.addClass(this.options.activeClass);(this.backgroundImage=this.element.data("background"))&&this.element.css({backgroundImage:"url("+this.backgroundImage+")"});this._activate()},_activate:function(){var e=this;e.refresh();e.update(i.scrollTop());"parallax"==this.options.mode?e.element.addClass(this.options.parallaxClass):"fixed"==this.options.mode&&e.element.addClass(this.options.fixedBgClass)},update:function(e){"parallax"==this.options.mode&&this.elementBottom>=e&&this.elementTop<=e+s&&this.element.css("backgroundPosition",this.options.xpos+" "+Math.round((this.elementTop-e)*this.options.speedFactor)+"px")},refresh:function(){this.elementTop=this.element.offset().top;this.elementBottom=this.elementTop+this.element.outerHeight()}};e.fn.parallax=function(t){return this.each(function(){var n=e.data(this,"parallax"),r=typeof t=="object"&&t;if(!n){e.data(this,"parallax",n=new u(this,r));a.push(n)}typeof t=="string"&&n[t]()})}})(jQuery,window,document);